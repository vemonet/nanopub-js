/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const t=window,e=t.ShadowRoot&&(void 0===t.ShadyCSS||t.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,i=Symbol(),s=new WeakMap;let r=class{constructor(t,e,s){if(this._$cssResult$=!0,s!==i)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=t,this.t=e}get styleSheet(){let t=this.o;const i=this.t;if(e&&void 0===t){const e=void 0!==i&&1===i.length;e&&(t=s.get(i)),void 0===t&&((this.o=t=new CSSStyleSheet).replaceSync(this.cssText),e&&s.set(i,t))}return t}toString(){return this.cssText}};const n=(t,...e)=>{const s=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(!0===t._$cssResult$)return t.cssText;if("number"==typeof t)return t;throw Error("Value passed to 'css' function must be a 'css' function result: "+t+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(i)+t[s+1]),t[0]);return new r(s,t,i)},a=e?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e="";for(const i of t.cssRules)e+=i.cssText;return(t=>new r("string"==typeof t?t:t+"",void 0,i))(e)})(t):t
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;var h;const o=window,l=o.trustedTypes,u=l?l.emptyScript:"",d=o.reactiveElementPolyfillSupport,c={toAttribute(t,e){switch(e){case Boolean:t=t?u:null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch{i=null}}return i}},_=(t,e)=>e!==t&&(e==e||t==t),p={attribute:!0,type:String,converter:c,reflect:!1,hasChanged:_};let f=class extends HTMLElement{constructor(){super(),this._$Ei=new Map,this.isUpdatePending=!1,this.hasUpdated=!1,this._$El=null,this.u()}static addInitializer(t){var e;this.finalize(),(null!==(e=this.h)&&void 0!==e?e:this.h=[]).push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this._$Ep(i,e);void 0!==s&&(this._$Ev.set(s,i),t.push(s))})),t}static createProperty(t,e=p){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i="symbol"==typeof t?Symbol():"__"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const r=this[t];this[e]=s,this.requestUpdate(t,r,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||p}static finalize(){if(this.hasOwnProperty("finalized"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),void 0!==t.h&&(this.h=[...t.h]),this.elementProperties=new Map(t.elementProperties),this._$Ev=new Map,this.hasOwnProperty("properties")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(a(t))}else void 0!==t&&e.push(a(t));return e}static _$Ep(t,e){const i=e.attribute;return!1===i?void 0:"string"==typeof i?i:"string"==typeof t?t.toLowerCase():void 0}u(){var t;this._$E_=new Promise((t=>this.enableUpdating=t)),this._$AL=new Map,this._$Eg(),this.requestUpdate(),null===(t=this.constructor.h)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this._$ES)&&void 0!==e?e:this._$ES=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this._$ES)||void 0===e||e.splice(this._$ES.indexOf(t)>>>0,1)}_$Eg(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this._$Ei.set(e,this[e]),delete this[e])}))}createRenderRoot(){var i;const s=null!==(i=this.shadowRoot)&&void 0!==i?i:this.attachShadow(this.constructor.shadowRootOptions);return((i,s)=>{e?i.adoptedStyleSheets=s.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):s.forEach((e=>{const s=document.createElement("style"),r=t.litNonce;void 0!==r&&s.setAttribute("nonce",r),s.textContent=e.cssText,i.appendChild(s)}))})(s,this.constructor.elementStyles),s}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)}))}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)}))}attributeChangedCallback(t,e,i){this._$AK(t,i)}_$EO(t,e,i=p){var s;const r=this.constructor._$Ep(t,i);if(void 0!==r&&!0===i.reflect){const n=(void 0!==(null===(s=i.converter)||void 0===s?void 0:s.toAttribute)?i.converter:c).toAttribute(e,i.type);this._$El=t,null==n?this.removeAttribute(r):this.setAttribute(r,n),this._$El=null}}_$AK(t,e){var i;const s=this.constructor,r=s._$Ev.get(t);if(void 0!==r&&this._$El!==r){const t=s.getPropertyOptions(r),n="function"==typeof t.converter?{fromAttribute:t.converter}:void 0!==(null===(i=t.converter)||void 0===i?void 0:i.fromAttribute)?t.converter:c;this._$El=r,this[r]=n.fromAttribute(e,t.type),this._$El=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||_)(this[t],e)?(this._$AL.has(t)||this._$AL.set(t,e),!0===i.reflect&&this._$El!==t&&(void 0===this._$EC&&(this._$EC=new Map),this._$EC.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this._$E_=this._$Ej())}async _$Ej(){this.isUpdatePending=!0;try{await this._$E_}catch(t){Promise.reject(t)}const t=this.scheduleUpdate();return null!=t&&await t,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this._$Ei&&(this._$Ei.forEach(((t,e)=>this[e]=t)),this._$Ei=void 0);let e=!1;const i=this._$AL;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this._$ES)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this._$Ek()}catch(t){throw e=!1,this._$Ek(),t}e&&this._$AE(i)}willUpdate(t){}_$AE(t){var e;null===(e=this._$ES)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}_$Ek(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$E_}shouldUpdate(t){return!0}update(t){void 0!==this._$EC&&(this._$EC.forEach(((t,e)=>this._$EO(e,this[e],t))),this._$EC=void 0),this._$Ek()}updated(t){}firstUpdated(t){}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var b;f.finalized=!0,f.elementProperties=new Map,f.elementStyles=[],f.shadowRootOptions={mode:"open"},d?.({ReactiveElement:f}),(null!==(h=o.reactiveElementVersions)&&void 0!==h?h:o.reactiveElementVersions=[]).push("1.6.1");const g=window,y=g.trustedTypes,v=y?y.createPolicy("lit-html",{createHTML:t=>t}):void 0,x=`lit$${(Math.random()+"").slice(9)}$`,$="?"+x,m=`<${$}>`,k=document,w=(t="")=>k.createComment(t),A=t=>null===t||"object"!=typeof t&&"function"!=typeof t,S=Array.isArray,j=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,P=/-->/g,R=/>/g,I=RegExp(">|[ \t\n\f\r](?:([^\\s\"'>=/]+)([ \t\n\f\r]*=[ \t\n\f\r]*(?:[^ \t\n\f\r\"'`<>=]|(\"|')|))|$)","g"),E=/'/g,C=/"/g,N=/^(?:script|style|textarea|title)$/i,T=(B=1,(t,...e)=>({_$litType$:B,strings:t,values:e})),O=Symbol.for("lit-noChange"),D=Symbol.for("lit-nothing"),L=new WeakMap,M=k.createTreeWalker(k,129,null,!1);var B;class q{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let r=0,n=0;const a=t.length-1,h=this.parts,[o,l]=((t,e)=>{const i=t.length-1,s=[];let r,n=2===e?"<svg>":"",a=j;for(let e=0;e<i;e++){const i=t[e];let h,o,l=-1,u=0;for(;u<i.length&&(a.lastIndex=u,o=a.exec(i),null!==o);)u=a.lastIndex,a===j?"!--"===o[1]?a=P:void 0!==o[1]?a=R:void 0!==o[2]?(N.test(o[2])&&(r=RegExp("</"+o[2],"g")),a=I):void 0!==o[3]&&(a=I):a===I?">"===o[0]?(a=r??j,l=-1):void 0===o[1]?l=-2:(l=a.lastIndex-o[2].length,h=o[1],a=void 0===o[3]?I:'"'===o[3]?C:E):a===C||a===E?a=I:a===P||a===R?a=j:(a=I,r=void 0);const d=a===I&&t[e+1].startsWith("/>")?" ":"";n+=a===j?i+m:l>=0?(s.push(h),i.slice(0,l)+"$lit$"+i.slice(l)+x+d):i+x+(-2===l?(s.push(void 0),e):d)}const h=n+(t[i]||"<?>")+(2===e?"</svg>":"");if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return[void 0!==v?v.createHTML(h):h,s]})(t,e);if(this.el=q.createElement(o,i),M.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=M.nextNode())&&h.length<a;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith("$lit$")||e.startsWith(x)){const i=l[n++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+"$lit$").split(x),e=/([.?@])?(.*)/.exec(i);h.push({type:1,index:r,name:e[2],strings:t,ctor:"."===e[1]?Q:"?"===e[1]?Z:"@"===e[1]?W:z})}else h.push({type:6,index:r})}for(const e of t)s.removeAttribute(e)}if(N.test(s.tagName)){const t=s.textContent.split(x),e=t.length-1;if(e>0){s.textContent=y?y.emptyScript:"";for(let i=0;i<e;i++)s.append(t[i],w()),M.nextNode(),h.push({type:2,index:++r});s.append(t[e],w())}}}else if(8===s.nodeType)if(s.data===$)h.push({type:2,index:r});else{let t=-1;for(;-1!==(t=s.data.indexOf(x,t+1));)h.push({type:7,index:r}),t+=x.length-1}r++}}static createElement(t,e){const i=k.createElement("template");return i.innerHTML=t,i}}function F(t,e,i=t,s){var r,n,a,h;if(e===O)return e;let o=void 0!==s?null===(r=i._$Co)||void 0===r?void 0:r[s]:i._$Cl;const l=A(e)?void 0:e._$litDirective$;return o?.constructor!==l&&(null===(n=o?._$AO)||void 0===n||n.call(o,!1),void 0===l?o=void 0:(o=new l(t),o._$AT(t,i,s)),void 0!==s?(null!==(a=(h=i)._$Co)&&void 0!==a?a:h._$Co=[])[s]=o:i._$Cl=o),void 0!==o&&(e=F(t,o._$AS(t,e.values),o,s)),e}class U{constructor(t,e){this.u=[],this._$AN=void 0,this._$AD=t,this._$AM=e}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}v(t){var e;const{el:{content:i},parts:s}=this._$AD,r=(null!==(e=t?.creationScope)&&void 0!==e?e:k).importNode(i,!0);M.currentNode=r;let n=M.nextNode(),a=0,h=0,o=s[0];for(;void 0!==o;){if(a===o.index){let e;2===o.type?e=new H(n,n.nextSibling,this,t):1===o.type?e=new o.ctor(n,o.name,o.strings,this,t):6===o.type&&(e=new V(n,this,t)),this.u.push(e),o=s[++h]}a!==o?.index&&(n=M.nextNode(),a++)}return r}p(t){let e=0;for(const i of this.u)void 0!==i&&(void 0!==i.strings?(i._$AI(t,i,e),e+=i.strings.length-2):i._$AI(t[e])),e++}}class H{constructor(t,e,i,s){var r;this.type=2,this._$AH=D,this._$AN=void 0,this._$AA=t,this._$AB=e,this._$AM=i,this.options=s,this._$Cm=null===(r=s?.isConnected)||void 0===r||r}get _$AU(){var t,e;return null!==(e=null===(t=this._$AM)||void 0===t?void 0:t._$AU)&&void 0!==e?e:this._$Cm}get parentNode(){let t=this._$AA.parentNode;const e=this._$AM;return void 0!==e&&11===t.nodeType&&(t=e.parentNode),t}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(t,e=this){t=F(this,t,e),A(t)?t===D||null==t||""===t?(this._$AH!==D&&this._$AR(),this._$AH=D):t!==this._$AH&&t!==O&&this.g(t):void 0!==t._$litType$?this.$(t):void 0!==t.nodeType?this.T(t):(t=>S(t)||"function"==typeof t?.[Symbol.iterator])(t)?this.k(t):this.g(t)}O(t,e=this._$AB){return this._$AA.parentNode.insertBefore(t,e)}T(t){this._$AH!==t&&(this._$AR(),this._$AH=this.O(t))}g(t){this._$AH!==D&&A(this._$AH)?this._$AA.nextSibling.data=t:this.T(k.createTextNode(t)),this._$AH=t}$(t){var e;const{values:i,_$litType$:s}=t,r="number"==typeof s?this._$AC(t):(void 0===s.el&&(s.el=q.createElement(s.h,this.options)),s);if((null===(e=this._$AH)||void 0===e?void 0:e._$AD)===r)this._$AH.p(i);else{const t=new U(r,this),e=t.v(this.options);t.p(i),this.T(e),this._$AH=t}}_$AC(t){let e=L.get(t.strings);return void 0===e&&L.set(t.strings,e=new q(t)),e}k(t){S(this._$AH)||(this._$AH=[],this._$AR());const e=this._$AH;let i,s=0;for(const r of t)s===e.length?e.push(i=new H(this.O(w()),this.O(w()),this,this.options)):i=e[s],i._$AI(r),s++;s<e.length&&(this._$AR(i&&i._$AB.nextSibling,s),e.length=s)}_$AR(t=this._$AA.nextSibling,e){var i;for(null===(i=this._$AP)||void 0===i||i.call(this,!1,!0,e);t&&t!==this._$AB;){const e=t.nextSibling;t.remove(),t=e}}setConnected(t){var e;void 0===this._$AM&&(this._$Cm=t,null===(e=this._$AP)||void 0===e||e.call(this,t))}}class z{constructor(t,e,i,s,r){this.type=1,this._$AH=D,this._$AN=void 0,this.element=t,this.name=e,this._$AM=s,this.options=r,i.length>2||""!==i[0]||""!==i[1]?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=D}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(t,e=this,i,s){const r=this.strings;let n=!1;if(void 0===r)t=F(this,t,e,0),n=!A(t)||t!==this._$AH&&t!==O,n&&(this._$AH=t);else{const s=t;let a,h;for(t=r[0],a=0;a<r.length-1;a++)h=F(this,s[i+a],e,a),h===O&&(h=this._$AH[a]),n||(n=!A(h)||h!==this._$AH[a]),h===D?t=D:t!==D&&(t+=(h??"")+r[a+1]),this._$AH[a]=h}n&&!s&&this.j(t)}j(t){t===D?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,t??"")}}class Q extends z{constructor(){super(...arguments),this.type=3}j(t){this.element[this.name]=t===D?void 0:t}}const G=y?y.emptyScript:"";class Z extends z{constructor(){super(...arguments),this.type=4}j(t){t&&t!==D?this.element.setAttribute(this.name,G):this.element.removeAttribute(this.name)}}class W extends z{constructor(t,e,i,s,r){super(t,e,i,s,r),this.type=5}_$AI(t,e=this){var i;if((t=null!==(i=F(this,t,e,0))&&void 0!==i?i:D)===O)return;const s=this._$AH,r=t===D&&s!==D||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,n=t!==D&&(s===D||r);r&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,t),this._$AH=t}handleEvent(t){var e,i;"function"==typeof this._$AH?this._$AH.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this._$AH.handleEvent(t)}}class V{constructor(t,e,i){this.element=t,this.type=6,this._$AN=void 0,this._$AM=e,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(t){F(this,t)}}const J=g.litHtmlPolyfillSupport;J?.(q,H),(null!==(b=g.litHtmlVersions)&&void 0!==b?b:g.litHtmlVersions=[]).push("2.6.1");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
var K,X;class Y extends f{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(t),this._$Do=((t,e,i)=>{var s,r;const n=null!==(s=i?.renderBefore)&&void 0!==s?s:e;let a=n._$litPart$;if(void 0===a){const t=null!==(r=i?.renderBefore)&&void 0!==r?r:null;n._$litPart$=a=new H(e.insertBefore(w(),t),t,void 0,i??{})}return a._$AI(t),a})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this._$Do)||void 0===t||t.setConnected(!1)}render(){return O}}Y.finalized=!0,Y._$litElement$=!0,null===(K=globalThis.litElementHydrateSupport)||void 0===K||K.call(globalThis,{LitElement:Y});const tt=globalThis.litElementPolyfillSupport;tt?.({LitElement:Y}),(null!==(X=globalThis.litElementVersions)&&void 0!==X?X:globalThis.litElementVersions=[]).push("3.2.2");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const et=(t,e)=>"method"===e.kind&&e.descriptor&&!("value"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,t)}}:{kind:"field",key:Symbol(),placement:"own",descriptor:{},originalKey:e.key,initializer(){"function"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function it(t){return(e,i)=>{return void 0!==i?(s=t,r=i,void e.constructor.createProperty(r,s)):et(t,e);var s,r}}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function st(t){return it({...t,state:!0})}
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var rt;null===(rt=window.HTMLSlotElement)||void 0===rt||rt.prototype.assignedElements;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const nt=1,at=2,ht=t=>(...e)=>({_$litDirective$:t,values:e});let ot=class{constructor(t){}get _$AU(){return this._$AM._$AU}_$AT(t,e,i){this._$Ct=t,this._$AM=e,this._$Ci=i}_$AS(t,e){return this.update(t,e)}update(t,e){return this.render(...e)}};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */class lt extends ot{constructor(t){if(super(t),this.it=D,t.type!==at)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(t){if(t===D||null==t)return this._t=void 0,this.it=t;if(t===O)return t;if("string"!=typeof t)throw Error(this.constructor.directiveName+"() called with a non-string value");if(t===this.it)return this._t;this.it=t;const e=[t];return e.raw=e,this._t={_$litType$:this.constructor.resultType,strings:e,values:[]}}}lt.directiveName="unsafeHTML",lt.resultType=1;const ut=ht(lt),dt=ht(class extends ot{constructor(t){var e;if(super(t),t.type!==nt||"style"!==t.name||(null===(e=t.strings)||void 0===e?void 0:e.length)>2)throw Error("The `styleMap` directive must be used in the `style` attribute and must be the only part in the attribute.")}render(t){return Object.keys(t).reduce(((e,i)=>{const s=t[i];return null==s?e:e+`${i=i.replace(/(?:^(webkit|moz|ms|o)|)(?=[A-Z])/g,"-$&").toLowerCase()}:${s};`}),"")}update(t,[e]){const{style:i}=t.element;if(void 0===this.vt){this.vt=new Set;for(const t in e)this.vt.add(t);return this.render(e)}this.vt.forEach((t=>{null==e[t]&&(this.vt.delete(t),t.includes("-")?i.removeProperty(t):i[t]="")}));for(const t in e){const s=e[t];null!=s&&(this.vt.add(t),t.includes("-")?i.setProperty(t,s):i[t]=s)}return O}}),ct="http://www.w3.org/1999/02/22-rdf-syntax-ns#",_t="http://www.w3.org/2001/XMLSchema#",pt="http://www.w3.org/2000/10/swap/",ft={xsd:{decimal:`${_t}decimal`,boolean:`${_t}boolean`,double:`${_t}double`,integer:`${_t}integer`,string:`${_t}string`},rdf:{type:`${ct}type`,nil:`${ct}nil`,first:`${ct}first`,rest:`${ct}rest`,langString:`${ct}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${pt}reify#forSome`,forAll:`${pt}reify#forAll`},log:{implies:`${pt}log#implies`}};
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */var bt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};
/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */let gt;var yt="function"==typeof queueMicrotask?queueMicrotask.bind(typeof window<"u"?window:bt):t=>(gt||(gt=Promise.resolve())).then(t).catch((t=>setTimeout((()=>{throw t}),0)));const vt=yt,{xsd:xt}=ft,$t=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,mt={"\\":"\\","'":"'",'"':'"',n:"\n",r:"\r",t:"\t",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},kt=/[\x00-\x20<>\\"\{\}\|\^\`]/,wt={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},At=/$0^/;class St{constructor(t){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,t=t||{},this._lineMode=!!t.lineMode){this._n3Mode=!1;for(const t in this)!(t in wt)&&this[t]instanceof RegExp&&(this[t]=At)}else this._n3Mode=!1!==t.n3;this._comments=!!t.comments,this._literalClosingPos=0}_tokenizeToEnd(t,e){let i=this._input,s=i.length;for(;;){let t,a;for(;t=this._newline.exec(i);)this._comments&&(a=this._comment.exec(t[0]))&&r("comment",a[1],"",this._line,t[0].length),i=i.substr(t[0].length,i.length),s=i.length,this._line++;if(!t&&(t=this._whitespace.exec(i))&&(i=i.substr(t[0].length,i.length)),this._endOfFile.test(i))return e&&(this._comments&&(a=this._comment.exec(i))&&r("comment",a[1],"",this._line,i.length),i=null,r("eof","","",this._line,0)),this._input=i;const h=this._line,o=i[0];let l="",u="",d="",c=null,_=0,p=!1;switch(o){case"^":if(i.length<3)break;if("^"!==i[1]){this._n3Mode&&(_=1,l="^");break}if(this._previousMarker="^^",i=i.substr(2),"<"!==i[0]){p=!0;break}case"<":if(c=this._unescapedIri.exec(i))l="IRI",u=c[1];else if(c=this._iri.exec(i)){if(u=this._unescape(c[1]),null===u||kt.test(u))return n(this);l="IRI"}else i.length>1&&"<"===i[1]?(l="<<",_=2):this._n3Mode&&i.length>1&&"="===i[1]&&(l="inverse",_=2,u=">");break;case">":i.length>1&&">"===i[1]&&(l=">>",_=2);break;case"_":((c=this._blank.exec(i))||e&&(c=this._blank.exec(`${i} `)))&&(l="blank",d="_",u=c[1]);break;case'"':if(c=this._simpleQuotedString.exec(i))u=c[1];else if(({value:u,matchLength:_}=this._parseLiteral(i)),null===u)return n(this);(null!==c||0!==_)&&(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(c=this._simpleApostropheString.exec(i))u=c[1];else if(({value:u,matchLength:_}=this._parseLiteral(i)),null===u)return n(this);(null!==c||0!==_)&&(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(c=this._variable.exec(i))&&(l="var",u=c[0]);break;case"@":"literal"===this._previousMarker&&(c=this._langcode.exec(i))?(l="langcode",u=c[1]):(c=this._keyword.exec(i))&&(l=c[0]);break;case".":if(1===i.length?e:i[1]<"0"||i[1]>"9"){l=".",_=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(c=this._number.exec(i)||e&&(c=this._number.exec(`${i} `)))&&(l="literal",u=c[0],d="string"==typeof c[1]?xt.double:"string"==typeof c[2]?xt.decimal:xt.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(c=this._sparqlKeyword.exec(i))?l=c[0].toUpperCase():p=!0;break;case"f":case"t":(c=this._boolean.exec(i))?(l="literal",u=c[0],d=xt.boolean):p=!0;break;case"a":(c=this._shortPredicates.exec(i))?(l="abbreviation",u="a"):p=!0;break;case"=":this._n3Mode&&i.length>1&&(l="abbreviation",">"!==i[1]?(_=1,u="="):(_=2,u=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"{":case"}":this._lineMode||(_=1,l=o);break;default:p=!0}if(p&&("@prefix"!==this._previousMarker&&"PREFIX"!==this._previousMarker||!(c=this._prefix.exec(i))?((c=this._prefixed.exec(i))||e&&(c=this._prefixed.exec(`${i} `)))&&(l="prefixed",d=c[1]||"",u=this._unescape(c[2])):(l="prefix",u=c[1]||"")),"^^"===this._previousMarker)switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return e||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?n(this):this._input=i;const f=_||c[0].length,b=r(l,u,d,h,f);this.previousToken=b,this._previousMarker=l,i=i.substr(f,i.length)}function r(e,r,n,a,h){const o=i?s-i.length:s,l={type:e,value:r,prefix:n,line:a,start:o,end:o+h};return t(null,l),l}function n(e){t(e._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(t){let e=!1;const i=t.replace($t,((t,i,s,r)=>{if("string"==typeof i)return String.fromCharCode(Number.parseInt(i,16));if("string"==typeof s){let t=Number.parseInt(s,16);return t<=65535?String.fromCharCode(Number.parseInt(s,16)):String.fromCharCode(55296+((t-=65536)>>10),56320+(1023&t))}return r in mt?mt[r]:(e=!0,"")}));return e?null:i}_parseLiteral(t){if(t.length>=3){const e=t.match(/^(?:"""|"|'''|'|)/)[0],i=e.length;let s=Math.max(this._literalClosingPos,i);for(;(s=t.indexOf(e,s))>0;){let e=0;for(;"\\"===t[s-e-1];)e++;if(e%2==0){const e=t.substring(i,s),r=e.split(/\r\n|\r|\n/).length-1,n=s+i;if(1===i&&0!==r||3===i&&this._lineMode)break;return this._line+=r,{value:this._unescape(e),matchLength:n}}s++}this._literalClosingPos=t.length-i+1}return{value:"",matchLength:0}}_syntaxError(t){this._input=null;const e=new Error(`Unexpected "${t}" on line ${this._line}.`);return e.context={token:void 0,line:this._line,previousToken:this.previousToken},e}_readStartingBom(t){return t.startsWith("\ufeff")?t.substr(1):t}tokenize(t,e){if(this._line=1,"string"==typeof t){if(this._input=this._readStartingBom(t),"function"!=typeof e){const t=[];let e;if(this._tokenizeToEnd(((i,s)=>i?e=i:t.push(s)),!0),e)throw e;return t}vt((()=>this._tokenizeToEnd(e,!0)))}else this._pendingBuffer=null,"function"==typeof t.setEncoding&&t.setEncoding("utf8"),t.on("data",(t=>{null!==this._input&&0!==t.length&&(this._pendingBuffer&&(t=Buffer.concat([this._pendingBuffer,t]),this._pendingBuffer=null),128&t[t.length-1]?this._pendingBuffer=t:(typeof this._input>"u"?this._input=this._readStartingBom("string"==typeof t?t:t.toString()):this._input+=t,this._tokenizeToEnd(e,!1)))})),t.on("end",(()=>{"string"==typeof this._input&&this._tokenizeToEnd(e,!0)})),t.on("error",e)}}const{rdf:jt,xsd:Pt}=ft;let Rt,It=0;const Et={namedNode:function(t){return new Tt(t)},blankNode:function(t){return new Dt(t||"n3-"+It++)},variable:function(t){return new Lt(t)},literal:function(t,e){if("string"==typeof e)return new Ot(`"${t}"@${e.toLowerCase()}`);let i=e?e.value:"";return""===i&&("boolean"==typeof t?i=Pt.boolean:"number"==typeof t&&(Number.isFinite(t)?i=Number.isInteger(t)?Pt.integer:Pt.double:(i=Pt.double,Number.isNaN(t)||(t=t>0?"INF":"-INF")))),""===i||i===Pt.string?new Ot(`"${t}"`):new Ot(`"${t}"^^${i}`)},defaultGraph:function(){return Rt},quad:Bt,triple:Bt},Ct=Et;class Nt{constructor(t){this.id=t}get value(){return this.id}equals(t){return t instanceof Nt?this.id===t.id:!!t&&this.termType===t.termType&&this.value===t.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}class Tt extends Nt{get termType(){return"NamedNode"}}class Ot extends Nt{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const t=this.id;let e=t.lastIndexOf('"')+1;return e<t.length&&"@"===t[e++]?t.substr(e).toLowerCase():""}get datatype(){return new Tt(this.datatypeString)}get datatypeString(){const t=this.id,e=t.lastIndexOf('"')+1,i=e<t.length?t[e]:"";return"^"===i?t.substr(e+2):"@"!==i?Pt.string:jt.langString}equals(t){return t instanceof Ot?this.id===t.id:!!t&&!!t.datatype&&this.termType===t.termType&&this.value===t.value&&this.language===t.language&&this.datatype.value===t.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}}class Dt extends Nt{constructor(t){super(`_:${t}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}}class Lt extends Nt{constructor(t){super(`?${t}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}}Rt=new class extends Nt{constructor(){return super(""),Rt||this}get termType(){return"DefaultGraph"}equals(t){return this===t||!!t&&this.termType===t.termType}};class Mt extends Nt{constructor(t,e,i,s){super(""),this._subject=t,this._predicate=e,this._object=i,this._graph=s||Rt}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(t){return!!t&&this._subject.equals(t.subject)&&this._predicate.equals(t.predicate)&&this._object.equals(t.object)&&this._graph.equals(t.graph)}}function Bt(t,e,i,s){return new Mt(t,e,i,s)}let qt=0;class Ft{constructor(t){this._contextStack=[],this._graph=null,t=t||{},this._setBase(t.baseIRI),t.factory&&Ht(this,t.factory);const e="string"==typeof t.format?t.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(e),s=/trig/.test(e),r=/triple/.test(e),n=/quad/.test(e),a=this._n3Mode=/n3/.test(e),h=r||n;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||s||r||a),this._supportsRDFStar=""===e||/star|\*$/.test(e),h&&(this._resolveRelativeIRI=t=>null),this._blankNodePrefix="string"!=typeof t.blankNodePrefix?"":t.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=t.lexer||new St({lineMode:h,n3:a}),this._explicitQuantifiers=!!t.explicitQuantifiers}static _resetBlankNodePrefix(){qt=0}_setBase(t){if(t){const e=t.indexOf("#");e>=0&&(t=t.substr(0,e)),this._base=t,this._basePath=t.indexOf("/")<0?t:t.replace(/[^\/?]*(?:\?.*)?$/,""),t=t.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=t[0],this._baseScheme=t[1]}else this._base="",this._basePath=""}_saveContext(t,e,i,s,r){const n=this._n3Mode;this._contextStack.push({type:t,subject:i,predicate:s,object:r,graph:e,inverse:!!n&&this._inversePredicate,blankPrefix:n?this._prefixes._:"",quantified:n?this._quantified:null}),n&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.id.substr(2)}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(t,e){const i=this._contextStack.pop();if(!i||i.type!==t)return this._error(`Unexpected ${e.type}`,e);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(t){switch(t.type){case"eof":return null!==this._graph?this._error("Unclosed graph",t):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(t)}}_readEntity(t,e){let i;switch(t.type){case"IRI":case"typeIRI":const e=this._resolveIRI(t.value);if(null===e)return this._error("Invalid IRI",t);i=this._namedNode(e);break;case"type":case"prefixed":const s=this._prefixes[t.prefix];if(void 0===s)return this._error(`Undefined prefix "${t.prefix}:"`,t);i=this._namedNode(s+t.value);break;case"blank":i=this._blankNode(this._prefixes[t.prefix]+t.value);break;case"var":i=this._variable(t.value.substr(1));break;default:return this._error(`Expected entity but got ${t.type}`,t)}return!e&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(t){switch(this._predicate=null,t.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._blankNode(),null,null),this._readSubject):this._error("Unexpected graph",t);case"}":return this._readPunctuation(t);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier=this._blankNode,this._readQuantifierList):this._error('Unexpected "@forSome"',t);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier=this._variable,this._readQuantifierList):this._error('Unexpected "@forAll"',t);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",t);if(0===t.prefix.length)return this._literalValue=t.value,this._completeSubjectLiteral;this._subject=this._literal(t.value,this._namedNode(t.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if(void 0===(this._subject=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(t){const e=t.type;switch(e){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[t.value];break;case".":case"]":case"}":return null===this._predicate?this._error(`Unexpected ${e}`,t):(this._subject=null,"]"===e?this._readBlankNodeTail(t):this._readPunctuation(t));case";":return null!==this._predicate?this._readPredicate:this._error("Expected predicate but got ;",t);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",t);default:if(void 0===(this._predicate=this._readEntity(t)))return}return this._readObject}_readObject(t){switch(t.type){case"literal":if(0===t.prefix.length)return this._literalValue=t.value,this._readDataTypeOrLang;this._object=this._literal(t.value,this._namedNode(t.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF* syntax",t);default:if(void 0===(this._object=this._readEntity(t)))return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(t){return"{"===t.type?this._readGraph(t):this._readPredicate(t)}_readGraph(t){return"{"!==t.type?this._error(`Expected graph but got ${t.type}`,t):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(t){return"]"===t.type?(this._subject=null,this._readBlankNodeTail(t)):(this._predicate=null,this._readPredicate(t))}_readBlankNodeTail(t){if("]"!==t.type)return this._readBlankNodePunctuation(t);null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph);const e=null===this._predicate;return this._restoreContext("blank",t),null!==this._object?this._getContextEndReader():null!==this._predicate?this._readObject:e?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(t){switch(t.type){case".":case"}":return this._subject=null,this._readPunctuation(t);default:return this._readPredicate(t)}}_readListItem(t){let e=null,i=null,s=this._readListItem;const r=this._subject,n=this._contextStack,a=n[n.length-1];switch(t.type){case"[":this._saveContext("blank",this._graph,i=this._blankNode(),this.RDF_FIRST,this._subject=e=this._blankNode()),s=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",t),0!==n.length&&"list"===n[n.length-1].type&&this._emit(this._subject,this._predicate,this._object,this._graph),null===this._predicate){if(s=this._readPredicate,this._subject===this.RDF_NIL)return s}else if(s=this._getContextEndReader(),this._object===this.RDF_NIL)return s;i=this.RDF_NIL;break;case"literal":0===t.prefix.length?(this._literalValue=t.value,s=this._readListItemDataTypeOrLang):(e=this._literal(t.value,this._namedNode(t.prefix)),s=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._blankNode()),this._readSubject):this._error("Unexpected graph",t);default:if(void 0===(e=this._readEntity(t)))return}if(null===i&&(this._subject=i=this._blankNode()),null===r?null===a.predicate?a.subject=i:a.object=i:this._emit(r,this.RDF_REST,i,this._graph),null!==e){if(this._n3Mode&&("IRI"===t.type||"prefixed"===t.type))return this._saveContext("item",this._graph,i,this.RDF_FIRST,e),this._subject=e,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,e,this._graph)}return s}_readDataTypeOrLang(t){return this._completeObjectLiteral(t,!1)}_readListItemDataTypeOrLang(t){return this._completeObjectLiteral(t,!0)}_completeLiteral(t){let e=this._literal(this._literalValue);switch(t.type){case"type":case"typeIRI":const i=this._readEntity(t);if(void 0===i)return;e=this._literal(this._literalValue,i),t=null;break;case"langcode":e=this._literal(this._literalValue,t.value),t=null}return{token:t,literal:e}}_completeSubjectLiteral(t){return this._subject=this._completeLiteral(t).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(t,e){const i=this._completeLiteral(t);if(i)return this._object=i.literal,e&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),null===i.token?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(t){return"}"!==t.type?this._readPunctuation(t):(null!==this._subject&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",t),null===this._object?this._readPredicate:this._getContextEndReader())}_readPunctuation(t){let e,i=this._graph;const s=this._subject,r=this._inversePredicate;switch(t.type){case"}":if(null===this._graph)return this._error("Unexpected graph closing",t);if(this._n3Mode)return this._readFormulaTail(t);this._graph=null;case".":this._subject=null,e=this._contextStack.length?this._readSubject:this._readInTopContext,r&&(this._inversePredicate=!1);break;case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:if(this._supportsQuads&&null===this._graph&&void 0!==(i=this._readEntity(t))){e=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}if(null!==s){const t=this._predicate,e=this._object;r?this._emit(e,t,s,i):this._emit(s,t,e,i)}return e}_readBlankNodePunctuation(t){let e;switch(t.type){case";":e=this._readPredicate;break;case",":e=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,t)}return this._emit(this._subject,this._predicate,this._object,this._graph),e}_readQuadPunctuation(t){return"."!==t.type?this._error("Expected dot to follow quad",t):this._readInTopContext}_readPrefix(t){return"prefix"!==t.type?this._error("Expected prefix to follow @prefix",t):(this._prefix=t.value,this._readPrefixIRI)}_readPrefixIRI(t){if("IRI"!==t.type)return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,t);const e=this._readEntity(t);return this._prefixes[this._prefix]=e.value,this._prefixCallback(this._prefix,e),this._readDeclarationPunctuation}_readBaseIRI(t){const e="IRI"===t.type&&this._resolveIRI(t.value);return e?(this._setBase(e),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",t)}_readNamedGraphLabel(t){switch(t.type){case"IRI":case"blank":case"prefixed":return this._readSubject(t),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",t)}}_readNamedGraphBlankLabel(t){return"]"!==t.type?this._error("Invalid graph label",t):(this._subject=this._blankNode(),this._readGraph)}_readDeclarationPunctuation(t){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(t)):"."!==t.type?this._error("Expected declaration to end with a dot",t):this._readInTopContext}_readQuantifierList(t){let e;switch(t.type){case"IRI":case"prefixed":if(void 0!==(e=this._readEntity(t,!0)))break;default:return this._error(`Unexpected ${t.type}`,t)}return this._explicitQuantifiers?(null===this._subject?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,e,this.QUANTIFIERS_GRAPH)):this._quantified[e.id]=this._quantifier(this._blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(t){return","===t.type?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(t))}_getPathReader(t){return this._afterPath=t,this._readPath}_readPath(t){switch(t.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const e=this._contextStack,i=e.length&&e[e.length-1];if(i&&"item"===i.type){const e=this._subject;this._restoreContext("item",t),this._emit(this._subject,this.RDF_FIRST,e,this._graph)}return this._afterPath(t)}}_readForwardPath(t){let e,i;const s=this._blankNode();if(void 0!==(i=this._readEntity(t)))return null===this._predicate?(e=this._subject,this._subject=s):(e=this._object,this._object=s),this._emit(e,i,s,this._graph),this._readPath}_readBackwardPath(t){const e=this._blankNode();let i,s;if(void 0!==(i=this._readEntity(t)))return null===this._predicate?(s=this._subject,this._subject=e):(s=this._object,this._object=e),this._emit(e,i,s,this._graph),this._readPath}_readRDFStarTailOrGraph(t){return">>"!==t.type?this._supportsQuads&&null===this._graph&&void 0!==(this._graph=this._readEntity(t))?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,t):this._readRDFStarTail(t)}_readRDFStarTail(t){if(">>"!==t.type)return this._error(`Expected >> but got ${t.type}`,t);const e=this._quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",t),null===this._subject?(this._subject=e,this._readPredicate):(this._object=e,this._getContextEndReader())}_getContextEndReader(){const t=this._contextStack;if(!t.length)return this._readPunctuation;switch(t[t.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(t,e,i,s){this._callback(null,this._quad(t,e,i,s||this.DEFAULTGRAPH))}_error(t,e){const i=new Error(`${t} on line ${e.line}.`);i.context={token:e,line:e.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=Ut}_resolveIRI(t){return/^[a-z][a-z0-9+.-]*:/i.test(t)?t:this._resolveRelativeIRI(t)}_resolveRelativeIRI(t){if(!t.length)return this._base;switch(t[0]){case"#":return this._base+t;case"?":return this._base.replace(/(?:\?.*)?$/,t);case"/":return("/"===t[1]?this._baseScheme:this._baseRoot)+this._removeDotSegments(t);default:return/^[^/:]*:/.test(t)?null:this._removeDotSegments(this._basePath+t)}}_removeDotSegments(t){if(!/(^|\/)\.\.?($|[/#?])/.test(t))return t;const e=t.length;let i="",s=-1,r=-1,n=0,a="/";for(;s<e;){switch(a){case":":if(r<0&&"/"===t[++s]&&"/"===t[++s])for(;(r=s+1)<e&&"/"!==t[r];)s=r;break;case"?":case"#":s=e;break;case"/":if("."===t[s+1])switch(a=t[1+ ++s],a){case"/":i+=t.substring(n,s-1),n=s+1;break;case void 0:case"?":case"#":return i+t.substring(n,s)+t.substr(s+1);case".":if(a=t[1+ ++s],void 0===a||"/"===a||"?"===a||"#"===a){if(i+=t.substring(n,s-2),(n=i.lastIndexOf("/"))>=r&&(i=i.substr(0,n)),"/"!==a)return`${i}/${t.substr(s+1)}`;n=s+1}}}a=t[++s]}return i+t.substring(n)}parse(t,e,i){if(this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${qt++}_`,this._prefixCallback=i||Ut,this._inversePredicate=!1,this._quantified=Object.create(null),!e){const e=[];let i;if(this._callback=(t,s)=>{t?i=t:s&&e.push(s)},this._lexer.tokenize(t).every((t=>this._readCallback=this._readCallback(t))),i)throw i;return e}this._callback=e,this._lexer.tokenize(t,((t,e)=>{null!==t?(this._callback(t),this._callback=Ut):this._readCallback&&(this._readCallback=this._readCallback(e))}))}}function Ut(){}function Ht(t,e){const i=e.namedNode;t._namedNode=i,t._blankNode=e.blankNode,t._literal=e.literal,t._variable=e.variable,t._quad=e.quad,t.DEFAULTGRAPH=e.defaultGraph(),t.RDF_FIRST=i(ft.rdf.first),t.RDF_REST=i(ft.rdf.rest),t.RDF_NIL=i(ft.rdf.nil),t.N3_FORALL=i(ft.r.forAll),t.N3_FORSOME=i(ft.r.forSome),t.ABBREVIATIONS={a:i(ft.rdf.type),"=":i(ft.owl.sameAs),">":i(ft.log.implies)},t.QUANTIFIERS_GRAPH=i("urn:n3:quantifiers")}Ht(Ft.prototype,Ct);const zt=Ct.defaultGraph(),{rdf:Qt,xsd:Gt}=ft,Zt=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Wt=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,Vt={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class Jt extends Nt{equals(){return!1}}class Kt{constructor(t,e){if(this._prefixRegex=/$0^/,t&&"function"!=typeof t.write&&(e=t,t=null),e=e||{},this._lists=e.lists,t)this._outputStream=t,this._endStream=void 0===e.end||!!e.end;else{let t="";this._outputStream={write(e,i,s){t+=e,s&&s()},end:e=>{e&&e(null,t)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(e.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=zt,this._prefixIRIs=Object.create(null),e.prefixes&&this.addPrefixes(e.prefixes),e.baseIRI&&(this._baseMatcher=new RegExp(`^${Yt(e.baseIRI)}${e.baseIRI.endsWith("/")?"":"[#?]"}`),this._baseLength=e.baseIRI.length))}get _inDefaultGraph(){return zt.equals(this._graph)}_write(t,e){this._outputStream.write(t,"utf8",e)}_writeQuad(t,e,i,s,r){try{s.equals(this._graph)||(this._write((null===this._subject?"":this._inDefaultGraph?".\n":"\n}\n")+(zt.equals(s)?"":`${this._encodeIriOrBlank(s)} {\n`)),this._graph=s,this._subject=null),t.equals(this._subject)?e.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,r):this._write(`;\n    ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(i)}`,r):this._write(`${(null===this._subject?"":".\n")+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(i)}`,r)}catch(t){r&&r(t)}}_writeQuadLine(t,e,i,s,r){delete this._prefixMatch,this._write(this.quadToString(t,e,i,s),r)}quadToString(t,e,i,s){return`${this._encodeSubject(t)} ${this._encodeIriOrBlank(e)} ${this._encodeObject(i)}${s&&s.value?` ${this._encodeIriOrBlank(s)} .\n`:" .\n"}`}quadsToString(t){return t.map((t=>this.quadToString(t.subject,t.predicate,t.object,t.graph))).join("")}_encodeSubject(t){return"Quad"===t.termType?this._encodeQuad(t):this._encodeIriOrBlank(t)}_encodeIriOrBlank(t){if("NamedNode"!==t.termType)return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let e=t.value;this._baseMatcher&&this._baseMatcher.test(e)&&(e=e.substr(this._baseLength)),Zt.test(e)&&(e=e.replace(Wt,Xt));const i=this._prefixRegex.exec(e);return i?i[1]?this._prefixIRIs[i[1]]+i[2]:e:`<${e}>`}_encodeLiteral(t){let e=t.value;if(Zt.test(e)&&(e=e.replace(Wt,Xt)),t.language)return`"${e}"@${t.language}`;if(this._lineMode){if(t.datatype.value===Gt.string)return`"${e}"`}else switch(t.datatype.value){case Gt.string:return`"${e}"`;case Gt.boolean:if("true"===e||"false"===e)return e;break;case Gt.integer:if(/^[+-]?\d+$/.test(e))return e;break;case Gt.decimal:if(/^[+-]?\d*\.\d+$/.test(e))return e;break;case Gt.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(e))return e}return`"${e}"^^${this._encodeIriOrBlank(t.datatype)}`}_encodePredicate(t){return t.value===Qt.type?"a":this._encodeIriOrBlank(t)}_encodeObject(t){switch(t.termType){case"Quad":return this._encodeQuad(t);case"Literal":return this._encodeLiteral(t);default:return this._encodeIriOrBlank(t)}}_encodeQuad({subject:t,predicate:e,object:i,graph:s}){return`<<${this._encodeSubject(t)} ${this._encodePredicate(e)} ${this._encodeObject(i)}${function(t){return!!t&&"DefaultGraph"===t.termType}(s)?"":` ${this._encodeIriOrBlank(s)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(t,e,i,s,r){void 0===i?this._writeQuad(t.subject,t.predicate,t.object,t.graph,e):"function"==typeof s?this._writeQuad(t,e,i,zt,s):this._writeQuad(t,e,i,s||zt,r)}addQuads(t){for(let e=0;e<t.length;e++)this.addQuad(t[e])}addPrefix(t,e,i){const s={};s[t]=e,this.addPrefixes(s,i)}addPrefixes(t,e){if(!this._prefixIRIs)return e&&e();let i=!1;for(let e in t){let s=t[e];"string"!=typeof s&&(s=s.value),i=!0,null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null,this._graph=""),this._prefixIRIs[s]=e+=":",this._write(`@prefix ${e} <${s}>.\n`)}if(i){let t="",e="";for(const i in this._prefixIRIs)t+=t?`|${i}`:i,e+=(e?"|":"")+this._prefixIRIs[i];t=Yt(t),this._prefixRegex=new RegExp(`^(?:${e})[^/]*$|^(${t})([_a-zA-Z][\\-_a-zA-Z0-9]*)$`)}this._write(i?"\n":"",e)}blank(t,e){let i,s,r=t;switch(void 0===t?r=[]:t.termType?r=[{predicate:t,object:e}]:"length"in t||(r=[t]),s=r.length){case 0:return new Jt("[]");case 1:if(i=r[0],!(i.object instanceof Jt))return new Jt(`[ ${this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)} ]`);default:let e="[";for(let n=0;n<s;n++)i=r[n],i.predicate.equals(t)?e+=`, ${this._encodeObject(i.object)}`:(e+=`${(n?";\n  ":"\n  ")+this._encodePredicate(i.predicate)} ${this._encodeObject(i.object)}`,t=i.predicate);return new Jt(`${e}\n]`)}}list(t){const e=t&&t.length||0,i=new Array(e);for(let s=0;s<e;s++)i[s]=this._encodeObject(t[s]);return new Jt(`(${i.join(" ")})`)}end(t){null!==this._subject&&(this._write(this._inDefaultGraph?".\n":"\n}\n"),this._subject=null),this._write=this._blockedWrite;let e=t&&((i,s)=>{e=null,t(i,s)});if(this._endStream)try{return this._outputStream.end(e)}catch{}e&&e()}}function Xt(t){let e=Vt[t];return void 0===e&&(1===t.length?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}function Yt(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const te=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,ee=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,ie={"\\":"\\\\",'"':'\\"',"\t":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"},se=Ct.defaultGraph(),re='target="_blank" rel="noopener noreferrer"';class ne extends Kt{_encodeIriOrBlank(t){if("NamedNode"!==t.termType)return this._lists&&t.value in this._lists&&(t=this.list(this._lists[t.value])),"id"in t?t.id:`_:${t.value}`;let e=t.value;this._baseMatcher&&this._baseMatcher.test(e)&&(e=e.substr(this._baseLength)),te.test(e)&&(e=e.replace(ee,ae));const i=this._prefixRegex.exec(e);return i&&!i[2]&&(i[2]=""),i?i[1]?`<a href="${e}" ${re}>${this._prefixIRIs[i[1]]+i[2]||":"}</a>`:e:`<<a href="${e}" ${re}>${e}</a>>`}_writeQuad(t,e,i,s,r){try{if(!s.equals(this._graph)){const t=s.id.toString().toLowerCase();let e="assertion";t.endsWith("head")&&(e="head"),(t.endsWith("provenance")||t.endsWith("prov"))&&(e="provenance"),t.endsWith("pubinfo")&&(e="pubinfo"),this._write((null===this._subject?"":this._inDefaultGraph?".<br/>":" .<br/>}</div>")+(se.equals(s)?"":`<div class="nanopub-graph" id="nanopub-${e}">${this._encodeIriOrBlank(s)} {<br/>`)),this._graph=s,this._subject=null}t.equals(this._subject)?e.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,r):this._write(` ;<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;${this._encodePredicate(this._predicate=e)} ${this._encodeObject(i)}`,r):this._write(`${(null===this._subject?"":" .<br/>")+"&nbsp;&nbsp;&nbsp;&nbsp;"+this._encodeSubject(this._subject=t)} ${this._encodePredicate(this._predicate=e)} ${this._encodeObject(i)}`,r)}catch(t){r&&r(t)}}addPrefixes(t,e){if(null!==this._subject&&(this._write(this._inDefaultGraph?".<br/>":"<br/>}<br/>"),this._subject=null,this._graph=""),!this._prefixIRIs)return e&&e();let i=!1;for(let e in t){let s=t[e];"string"!=typeof s&&(s=s.value),i=!0,this._prefixIRIs[s]=e+=":"}if(i){let t="",e="";for(const i in this._prefixIRIs)t+=t?`|${i}`:i,e+=(e?"|":"")+this._prefixIRIs[i];t=function(t){return t.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}(t),this._prefixRegex=new RegExp(`^(?:${e})[^/]*$|^(${t})([_a-zA-Z][\\-_a-zA-Z0-9]*)*$`)}}end(t){null!==this._subject&&(this._write(this._inDefaultGraph?".<br/>":" .<br/>}</div>"),this._subject=null),this._write=this._blockedWrite;let e=t&&((i,s)=>{e=null,t(i,s)});if(this._endStream)try{return this._outputStream.end(e)}catch{}e&&e()}}function ae(t){let e=ie[t];return void 0===e&&(1===t.length?(e=t.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=(1024*(t.charCodeAt(0)-55296)+t.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var he=Object.defineProperty,oe=Object.getOwnPropertyDescriptor,le=(t,e,i,s)=>{for(var r,n=s>1?void 0:s?oe(e,i):e,a=t.length-1;a>=0;a--)(r=t[a])&&(n=(s?r(e,i,n):r(n))||n);return s&&n&&he(e,i,n),n};const ue={head:n`#e8e8e8`,assertion:n`#99ccff`,provenance:n`#f3a08c`,pubinfo:n`#ffff66`,error:n`#f88b80`,grey:n`#d1d1d1`};let de=class extends Y{constructor(){super(...arguments),this.url="",this.rdf="",this.displayPrefixes=!1,this.displayHead=!1,this.displayPubinfo=!0,this.displayProvenance=!0,this.displayAssertion=!0,this.hidePubinfo=!1,this.hideProvenance=!1,this.hideAssertion=!1,this.disableDisplayButton=!1,this.showDisplayOptions=!1,this._handleClickOut=t=>{const e=this.renderRoot.querySelector(".display-checklist");window&&!e?.contains(t.originalTarget)&&(this.showDisplayOptions=!1,window.removeEventListener("click",this._handleClickOut))}}async connectedCallback(){if(super.connectedCallback(),!this.url&&!this.rdf&&(this.error=' No nanopublication has been provided, use the "url" or "rdf"\n        attribute to provide the URL, or RDF in the TRiG format, of the nanopublication.'),!this.error&&this.url&&!this.rdf){this.url.startsWith("https://purl.org/np/")&&!this.url.endsWith(".trig")&&(this.url=this.url+".trig");try{const t=await fetch(this.url);this.rdf=await t.text()}catch(t){this.error=` Issue fetching the nanopublication RDF at ${this.url}. ${t}`}}if(!this.error&&this.rdf){const t=new Ft,e=new ne(null,{format:"application/trig"}),i=[];t.parse(this.rdf,((t,s,r)=>{if(t)return this.error=` Issue parsing the nanopublication RDF with n3.js, make sure it is in the TRiG format. ${t}`,null;s?i.push(s):(this.prefixes={this:r.this,sub:r.sub,...r},e.addPrefixes(this.prefixes,null),i.map((t=>{e.addQuad(t)})),e.end(((t,e)=>{this.html_rdf=ut(e),setTimeout((()=>{this._applyDisplay("displayPrefixes"),this._applyDisplay("displayHead"),this.hidePubinfo&&(this.displayPubinfo=!1),this._applyDisplay("displayPubinfo"),this.hideProvenance&&(this.displayProvenance=!1),this._applyDisplay("displayProvenance"),this.hideAssertion&&(this.displayAssertion=!1),this._applyDisplay("displayAssertion")}),0)})))}))}}_applyDisplay(t){const e=t.substring(7).toLowerCase(),i=this.renderRoot.querySelector(`#nanopub-${e}`);i&&(i.style.display=this[t]?"inherit":"none")}_switchDisplay(t){this[t]=!this[t],this._applyDisplay(t)}_openDisplayOptions(){this.showDisplayOptions=!this.showDisplayOptions,window&&this.showDisplayOptions&&window.addEventListener("click",this._handleClickOut)}render(){return T`
      <div
        class="nanopub"
        style=${dt({"background-color":this.error?ue.error.toString():"inherit"})}
      >
        ${
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function(t,e,i){return t?e():i?.()}(this.prefixes,(()=>T` @prefix ${Object.keys(this.prefixes)[0]} <<a
              href="${this.prefixes[Object.keys(this.prefixes)[0]]}"
              target="_blank"
              rel="noopener noreferrer"
              >${this.prefixes[Object.keys(this.prefixes)[0]]}</a
            >> .
            ${this.disableDisplayButton?T``:T`<div class="display-checklist" tabindex="100">
                  <span
                    class="anchor-display-checklist"
                    @click="${()=>this._openDisplayOptions()}"
                    @touchstart="${()=>this._openDisplayOptions()}"
                  >
                    ${ce}
                    ${this.showDisplayOptions?T`Select the sections to display`:T``}
                  </span>
                  ${this.showDisplayOptions?T`<div class="display-checklist-wrapper">
                        <ul class="items" id="display-checklist-items">
                          <li
                            id="displayPrefixes"
                            @click=${t=>this._switchDisplay(t.target.id)}
                          >
                            <label
                              ><input
                                type="checkbox"
                                value="displayPrefixes"
                                .checked=${this.displayPrefixes}
                                @click=${t=>this._switchDisplay(t.target.value)}
                              />
                              Display prefixes
                            </label>
                          </li>
                          <li
                            id="displayHead"
                            @click=${t=>this._switchDisplay(t.target.id)}
                          >
                            <label
                              ><input
                                type="checkbox"
                                value="displayHead"
                                .checked=${this.displayHead}
                                @click=${t=>this._switchDisplay(t.target.value)}
                              />
                              Display Head graph
                            </label>
                          </li>
                          <li
                            id="displayAssertion"
                            @click=${t=>this._switchDisplay(t.target.id)}
                          >
                            <label
                              ><input
                                type="checkbox"
                                value="displayAssertion"
                                .checked=${this.displayAssertion}
                                @click=${t=>this._switchDisplay(t.target.value)}
                              />
                              Display Assertion graph
                            </label>
                          </li>
                          <li
                            id="displayProvenance"
                            @click=${t=>this._switchDisplay(t.target.id)}
                          >
                            <label
                              ><input
                                type="checkbox"
                                value="displayProvenance"
                                .checked=${this.displayProvenance}
                                @click=${t=>this._switchDisplay(t.target.value)}
                              />
                              Display Provenance graph
                            </label>
                          </li>
                          <li
                            id="displayPubinfo"
                            @click=${t=>this._switchDisplay(t.target.id)}
                          >
                            <label
                              ><input
                                type="checkbox"
                                value="displayPubinfo"
                                .checked=${this.displayPubinfo}
                                @click=${t=>this._switchDisplay(t.target.value)}
                              />
                              Display PubInfo graph
                            </label>
                          </li>
                        </ul>
                      </div>`:T``}
                </div>`}
            <br />

            <div id="nanopub-prefixes">
              ${Object.keys(this.prefixes).map(((t,e)=>0===e?T``:T`
                  @prefix ${t} <<a
                    href="${this.prefixes[t]}"
                    target="_blank"
                    rel="noopener noreferrer"
                    >${this.prefixes[t]}</a
                  >> .
                  <br />
                `))}
            </div>`))}
        ${this.html_rdf?T`${this.html_rdf}`:this.error?T`${this.error}`:T`Loading...`}
      </div>
    `}};de.styles=n`
    :host {
      font-family: monaco, monospace;
      font-size: 11pt;
      color: #444;
      display: flex;
      height: 100%;
      width: 100%;
      word-break: break-all;
      margin-bottom: 8px;
    }
    a {
      color: #000;
      text-decoration: none;
    }
    a:hover {
      color: #666;
    }
    .nanopub {
      height: 100%;
      padding: 8px;
      border-radius: 8px;
      border: solid;
      border-width: 1px;
    }
    .nanopub-graph {
      padding: 8px;
      margin-top: 8px;
      border-radius: 8px;
    }
    #nanopub-prefixes {
      display: none;
    }
    #nanopub-head {
      display: none;
      background: ${ue.head};
    }
    #nanopub-assertion {
      background: ${ue.assertion};
    }
    #nanopub-provenance {
      background: ${ue.provenance};
    }
    #nanopub-pubinfo {
      background: ${ue.pubinfo};
    }
    .display-checklist {
      font-family: sans-serif;
      float: right;
      font-size: 9pt;
      background: ${ue.head};
      border-radius: 7px;
      text-align: center;
    }
    .display-checklist .anchor-display-checklist {
      position: relative;
      display: inline-block;
      text-decoration: none;
      padding: 3px 8px;
      border-radius: 7px;
      cursor: help;
    }
    .display-checklist .anchor-display-checklist:hover {
      background: ${ue.grey};
    }
    .display-checklist-wrapper {
      z-index: 1;
      position: absolute;
      margin-top: 1px;
    }
    .display-checklist ul.items {
      position: relative;
      min-width: 100px;
      text-align: left;
      width: max-content;
      padding: 2px;
      margin: 0;
      border: 1px solid #ccc;
      border-radius: 7px;
      background: #fff;
    }
    .display-checklist ul.items li {
      list-style: none;
      margin-right: 8px;
    }
    .display-checklist label,
    li,
    input[type='checkbox'] {
      cursor: pointer;
    }
  `,le([it({type:String})],de.prototype,"url",2),le([it({type:String})],de.prototype,"rdf",2),le([it({type:Boolean})],de.prototype,"displayPrefixes",2),le([it({type:Boolean})],de.prototype,"displayHead",2),le([it({type:Boolean})],de.prototype,"displayPubinfo",2),le([it({type:Boolean})],de.prototype,"displayProvenance",2),le([it({type:Boolean})],de.prototype,"displayAssertion",2),le([it({type:Boolean})],de.prototype,"hidePubinfo",2),le([it({type:Boolean})],de.prototype,"hideProvenance",2),le([it({type:Boolean})],de.prototype,"hideAssertion",2),le([it({type:Boolean})],de.prototype,"disableDisplayButton",2),le([st()],de.prototype,"showDisplayOptions",2),le([st()],de.prototype,"html_rdf",2),le([st()],de.prototype,"prefixes",2),le([st()],de.prototype,"error",2),de=le([(t=>e=>{return"function"==typeof e?(i=t,s=e,customElements.define(i,s),s):((t,e)=>{const{kind:i,elements:s}=e;return{kind:i,elements:s,finisher(e){customElements.define(t,e)}}})(t,e);var i,s})("nanopub-display")],de);const ce=T`<svg
  xmlns="http://www.w3.org/2000/svg"
  height="16"
  width="16"
  viewBox="0 -80 1000 1000"
>
  <path
    d="M480.118 726Q551 726 600.5 676.382q49.5-49.617 49.5-120.5Q650 485 600.382 435.5q-49.617-49.5-120.5-49.5Q409 386 359.5 435.618q-49.5 49.617-49.5 120.5Q310 627 359.618 676.5q49.617 49.5 120.5 49.5Zm-.353-58Q433 668 400.5 635.265q-32.5-32.736-32.5-79.5Q368 509 400.735 476.5q32.736-32.5 79.5-32.5Q527 444 559.5 476.735q32.5 32.736 32.5 79.5Q592 603 559.265 635.5q-32.736 32.5-79.5 32.5ZM480 856q-146 0-264-83T40 556q58-134 176-217t264-83q146 0 264 83t176 217q-58 134-176 217t-264 83Zm0-300Zm-.169 240Q601 796 702.5 730.5 804 665 857 556q-53-109-154.331-174.5-101.332-65.5-222.5-65.5Q359 316 257.5 381.5 156 447 102 556q54 109 155.331 174.5 101.332 65.5 222.5 65.5Z"
  />
</svg>`;export{de as NanopubDisplay};
//# sourceMappingURL=nanopub-display.min.js.map
